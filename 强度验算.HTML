<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>螺旋锚/螺旋桩强度验算系统</title>
    <style>
        * {
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
            margin: 0;
            padding: 0;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
            overflow: hidden;
        }
        
        header {
            background: linear-gradient(135deg, #2c3e50, #3498db);
            color: white;
            padding: 25px 30px;
        }
        
        h1 {
            font-size: 28px;
            margin-bottom: 5px;
        }
        
        .subtitle {
            font-size: 16px;
            opacity: 0.9;
        }
        
        .tab-container {
            display: flex;
            background-color: #ecf0f1;
            border-bottom: 1px solid #ddd;
        }
        
        .tab {
            padding: 18px 30px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            border-bottom: 3px solid transparent;
        }
        
        .tab:hover {
            background-color: #d5dbdb;
        }
        
        .tab.active {
            background-color: white;
            color: #2c3e50;
            border-bottom: 3px solid #3498db;
        }
        
        .content {
            padding: 30px;
            min-height: 600px;
        }
        
        .method-content {
            display: none;
        }
        
        .method-content.active {
            display: block;
        }
        
        .section {
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 25px;
            margin-bottom: 25px;
            border-left: 4px solid #3498db;
        }
        
        h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eaeaea;
        }
        
        h3 {
            color: #2980b9;
            margin: 25px 0 15px 0;
            font-size: 18px;
        }
        
        .formula {
            background-color: #fff;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
            font-family: 'Cambria', 'Times New Roman', serif;
            font-size: 17px;
            border: 1px solid #e0e0e0;
            overflow-x: auto;
        }
        
        .input-group {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 15px;
        }
        
        .input-item {
            display: flex;
            flex-direction: column;
        }
        
        label {
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
            font-size: 14px;
        }
        
        input, select {
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 15px;
            transition: border-color 0.3s;
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);
        }
        
        .unit {
            color: #7f8c8d;
            font-size: 14px;
            margin-left: 5px;
        }
        
        .button-container {
            text-align: center;
            margin: 30px 0 20px 0;
        }
        
        button {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 15px 35px;
            font-size: 16px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
            box-shadow: 0 4px 6px rgba(52, 152, 219, 0.2);
        }
        
        button:hover {
            background-color: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 6px 8px rgba(52, 152, 219, 0.3);
        }
        
        .results-container {
            margin-top: 30px;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 20px;
        }
        
        .result-card {
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
            transition: transform 0.3s;
            border: 1px solid #eee;
        }
        
        .result-card:hover {
            transform: translateY(-5px);
        }
        
        .result-title {
            font-weight: 600;
            font-size: 16px;
            margin-bottom: 12px;
            color: #2c3e50;
        }
        
        .result-status {
            font-size: 18px;
            font-weight: 700;
            padding: 10px 15px;
            border-radius: 30px;
            display: inline-block;
            margin-top: 5px;
        }
        
        .status-satisfied {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .status-unsatisfied {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .norm-reference {
            font-size: 13px;
            color: #7f8c8d;
            margin-top: 5px;
            font-style: italic;
        }
        
        .method-description {
            margin-bottom: 25px;
            padding: 15px;
            background-color: #e8f4fc;
            border-radius: 6px;
            border-left: 4px solid #3498db;
        }
        
        .legend {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
        }
        
        .legend-color {
            width: 16px;
            height: 16px;
            border-radius: 4px;
        }
        
        .info-icon {
            display: inline-block;
            width: 18px;
            height: 18px;
            background-color: #3498db;
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 18px;
            font-size: 12px;
            margin-left: 5px;
            cursor: help;
        }
        
        @media (max-width: 768px) {
            .container {
                border-radius: 0;
            }
            
            .input-group {
                grid-template-columns: 1fr;
            }
            
            .results-container {
                grid-template-columns: 1fr;
            }
            
            .tab-container {
                flex-direction: column;
            }
            
            .tab {
                padding: 15px;
                text-align: center;
                border-bottom: 1px solid #ddd;
                border-left: 3px solid transparent;
            }
            
            .tab.active {
                border-bottom: 1px solid #ddd;
                border-left: 3px solid #3498db;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>螺旋锚/螺旋桩强度验算系统</h1>
            <div class="subtitle">基于两种设计规范的计算工具</div>
        </header>
        
        <div class="tab-container">
            <div class="tab active" data-tab="method1">架空输电线路螺旋锚基础设计规范 <span class="norm-reference">(规范7.5节)</span></div>
            <div class="tab" data-tab="method2">架空输电线路基础设计规程 <span class="norm-reference">(规范12.5节)</span></div>
        </div>
        
        <!-- 方法1：螺旋锚结构强度验算（规范7.5节） -->
        <div id="method1" class="method-content active">
            <div class="content">
                <div class="method-description">
                    <strong>方法说明：</strong> 本方法基于《架空输电线路螺旋锚基础设计规范》Q/GDW 10584-2022（规范7.5节）。
                </div>
                
                <div class="section">
                    <h2>1. 锚杆横截面强度验算</h2>
                    
                    <h3>1.1 运行工作状态 (公式14)</h3>
                    <div class="formula">T<sub>Al</sub><sup>max</sup> ≤ f × A<sub>g</sub></div>
                    
                    <div class="input-group">
                        <div class="input-item">
                            <label for="T_Al_max">最大轴向作用力设计值 T<sub>Al</sub><sup>max</sup> <span class="unit">(kN)</span></label>
                            <input type="number" id="T_Al_max" value="150" step="10">
                        </div>
                        
                        <div class="input-item">
                            <label for="f">材料抗拉/压强度设计值 f <span class="unit">(kPa)</span></label>
                            <input type="number" id="f" value="210000" step="1000">
                        </div>
                        
                        <div class="input-item">
                            <label for="b_run">锚杆外径(不计防腐) b <span class="unit">(m)</span><span class="info-icon" title="运行状态不计防腐设计所采取的预留厚度量">i</span></label>
                            <input type="number" id="b_run" value="0.1" step="0.01">
                        </div>
                        
                        <div class="input-item">
                            <label for="d_run">锚杆内径(不计防腐) d <span class="unit">(m)</span><span class="info-icon" title="运行状态不计防腐设计所采取的预留厚度量">i</span></label>
                            <input type="number" id="d_run" value="0.08" step="0.01">
                        </div>
                    </div>
                    
                    <h3>1.2 施工旋拧状态 (公式15)</h3>
                    <div class="formula">T<sub>q</sub><sup>m</sup> ≤ f<sub>vk</sub> × W<sub>p</sub></div>
                    
                    <div class="input-group">
                        <div class="input-item">
                            <label for="T_q_m">扭矩上限值 T<sub>q</sub><sup>m</sup> <span class="unit">(kN·m)</span></label>
                            <input type="number" id="T_q_m" value="50" step="5">
                        </div>
                        
                        <div class="input-item">
                            <label for="f_vk">材料许用抗剪强度 f<sub>vk</sub> <span class="unit">(kPa)</span></label>
                            <input type="number" id="f_vk" value="120000" step="1000">
                        </div>
                        
                        <div class="input-item">
                            <label for="b_install">锚杆外径(考虑防腐) b <span class="unit">(m)</span><span class="info-icon" title="施工状态取考虑防腐设计所采取的预留厚度后的值">i</span></label>
                            <input type="number" id="b_install" value="0.102" step="0.001">
                        </div>
                        
                        <div class="input-item">
                            <label for="d_install">锚杆内径(考虑防腐) d <span class="unit">(m)</span><span class="info-icon" title="施工状态取考虑防腐设计所采取的预留厚度后的值">i</span></label>
                            <input type="number" id="d_install" value="0.078" step="0.001">
                        </div>
                    </div>
                </div>
                
                <div class="section">
                    <h2>2. 锚盘强度验算</h2>
                    
                    <h3>2.1 运行工作状态 (公式16)</h3>
                    <div class="formula">单个锚盘：T<sub>Al</sub><sup>max</sup> ≤ π × b × t × f<sub>v</sub><br>多个锚盘：T<sub>Al</sub><sup>max</sup> ≤ n × (π × b × t) × f<sub>v</sub> / 1.2</div>
                    
                    <div class="input-group">
                        <div class="input-item">
                            <label for="T_Al_max_plate">最大轴向作用力设计值 T<sub>Al</sub><sup>max</sup> <span class="unit">(kN)</span></label>
                            <input type="number" id="T_Al_max_plate" value="120" step="10">
                        </div>
                        
                        <div class="input-item">
                            <label for="b_plate_run">锚盘直径(不计防腐) b <span class="unit">(m)</span><span class="info-icon" title="运行状态不计防腐设计所采取的预留厚度量">i</span></label>
                            <input type="number" id="b_plate_run" value="0.3" step="0.01">
                        </div>
                        
                        <div class="input-item">
                            <label for="t_plate_run">锚盘厚度(不计防腐) t <span class="unit">(m)</span><span class="info-icon" title="运行状态不计防腐设计所采取的预留厚度量">i</span></label>
                            <input type="number" id="t_plate_run" value="0.02" step="0.001">
                        </div>
                        
                        <div class="input-item">
                            <label for="f_v_plate_run">材料/焊缝抗剪强度 f<sub>v</sub> <span class="unit">(kPa)</span></label>
                            <input type="number" id="f_v_plate_run" value="180000" step="1000">
                        </div>
                        
                        <div class="input-item">
                            <label for="n_run">锚盘数量 n</label>
                            <select id="n_run">
                                <option value="1">单个锚盘</option>
                                <option value="2">2个锚盘</option>
                                <option value="3">3个锚盘</option>
                                <option value="4">4个锚盘</option>
		<option value="5">5个锚盘</option>
		<option value="6">6个锚盘</option>
		<option value="7">7个锚盘</option>
		<option value="8">8个锚盘</option>
		<option value="9">9个锚盘</option>
		<option value="10">10个锚盘</option>
                            </select>
                        </div>
                    </div>
                    
                    <h3>2.2 施工旋拧状态 (公式17)</h3>
                    <div class="formula">单个锚盘：T<sub>q</sub><sup>m</sup> ≤ π × b² × t × f<sub>v</sub> / 2<br>多个锚盘：T<sub>q</sub><sup>m</sup> ≤ n × (π × b² × t) × f<sub>v</sub> / 2.4</div>
                    
                    <div class="input-group">
                        <div class="input-item">
                            <label for="T_q_m_plate">扭矩上限值 T<sub>q</sub><sup>m</sup> <span class="unit">(kN·m)</span></label>
                            <input type="number" id="T_q_m_plate" value="45" step="5">
                        </div>
                        
                        <div class="input-item">
                            <label for="b_plate_install">锚盘直径(考虑防腐) b <span class="unit">(m)</span><span class="info-icon" title="施工状态取考虑防腐设计所采取的预留厚度后的值">i</span></label>
                            <input type="number" id="b_plate_install" value="0.3" step="0.01">
                        </div>
                        
                        <div class="input-item">
                            <label for="t_plate_install">锚盘厚度(考虑防腐) t <span class="unit">(m)</span><span class="info-icon" title="施工状态取考虑防腐设计所采取的预留厚度后的值">i</span></label>
                            <input type="number" id="t_plate_install" value="0.022" step="0.001">
                        </div>
                        
                        <div class="input-item">
                            <label for="f_v_plate_install">材料/焊缝许用抗剪强度 f<sub>v</sub> <span class="unit">(kPa)</span></label>
                            <input type="number" id="f_v_plate_install" value="150000" step="1000">
                        </div>
                        
                        <div class="input-item">
                            <label for="n_install">锚盘数量 n</label>
                            <select id="n_install">
                                <option value="1">单个锚盘</option>
                                <option value="2">2个锚盘</option>
                                <option value="3">3个锚盘</option>
                                <option value="4">4个锚盘</option>
		<option value="5">5个锚盘</option>
		<option value="6">6个锚盘</option>
		<option value="7">7个锚盘</option>
		<option value="8">8个锚盘</option>
		<option value="9">9个锚盘</option>
		<option value="10">10个锚盘</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <div class="button-container">
                    <button id="calculateBtn1">开始验算 (规范7.5)</button>
                </div>
                
                <div id="resultsSection1" style="display: none;">
                    <h2>验算结果 (规范7.5)</h2>
                    <p>以下为各项验算是否满足要求的结果：</p>
                    
                    <div class="results-container">
                        <div class="result-card">
                            <div class="result-title">锚杆运行工作状态</div>
                            <div id="resultAnchorRun1" class="result-status">-</div>
                            <div class="norm-reference">验算公式 (14)</div>
                        </div>
                        
                        <div class="result-card">
                            <div class="result-title">锚杆施工旋拧状态</div>
                            <div id="resultAnchorInstall1" class="result-status">-</div>
                            <div class="norm-reference">验算公式 (15)</div>
                        </div>
                        
                        <div class="result-card">
                            <div class="result-title">锚盘运行工作状态</div>
                            <div id="resultPlateRun1" class="result-status">-</div>
                            <div class="norm-reference">验算公式 (16)</div>
                        </div>
                        
                        <div class="result-card">
                            <div class="result-title">锚盘施工旋拧状态</div>
                            <div id="resultPlateInstall1" class="result-status">-</div>
                            <div class="norm-reference">验算公式 (17)</div>
                        </div>
                    </div>
                    
                    <div class="legend">
                        <div class="legend-item">
                            <div class="legend-color status-satisfied"></div>
                            <span>满足要求</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color status-unsatisfied"></div>
                            <span>不满足要求</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 方法2：架空输电线路螺旋桩验算（规范12.5节） -->
        <div id="method2" class="method-content">
            <div class="content">
                <div class="method-description">
                    <strong>方法说明：</strong> 本方法基于《架空输电线路基础设计规程》DL/T 5219-2023（规范12.5节）。
                </div>
                
                <div class="section">
                    <h2>1. 锚杆强度计算 (规范12.5.4)</h2>
                    
                    <h3>1.1 最大扭矩下剪应力验算 (公式12.5.4-1)</h3>
                    <div class="formula">τ<sub>max</sub> = M<sub>s</sub> / W<sub>p</sub> ≤ f<sub>v</sub></div>
                    <div class="formula">其中：W<sub>p</sub> = π(D<sup>4</sup> - d<sup>4</sup>) / (16D)</div>
                    
                    <div class="input-group">
                        <div class="input-item">
                            <label for="Ms">螺旋锚承受的最大扭矩 M<sub>s</sub> <span class="unit">(kN·m)</span></label>
                            <input type="number" id="Ms" value="50" step="1">
                        </div>
                        
                        <div class="input-item">
                            <label for="fv_anchor">锚杆抗剪强度设计值 f<sub>v</sub> <span class="unit">(kPa)</span></label>
                            <input type="number" id="fv_anchor" value="120000" step="1000">
                        </div>
                        
                        <div class="input-item">
                            <label for="D_anchor">锚杆外径 D <span class="unit">(m)</span></label>
                            <input type="number" id="D_anchor" value="0.1" step="0.01">
                        </div>
                        
                        <div class="input-item">
                            <label for="d_anchor">锚杆内径 d <span class="unit">(m)</span></label>
                            <input type="number" id="d_anchor" value="0.08" step="0.01">
                        </div>
                    </div>
                    
                    <h3>1.2 轴心受拉/受压强度验算 (公式12.5.4-2)</h3>
                    <div class="formula">σ = N / A<sub>n</sub> ≤ f<sub>g</sub></div>
                    <div class="formula">其中：A<sub>n</sub> = 0.95π(D² - d²)/4</div>
                    
                    <div class="input-group">
                        <div class="input-item">
                            <label for="N_axial">轴心拉力或压力 N <span class="unit">(kN)</span></label>
                            <input type="number" id="N_axial" value="150" step="10">
                        </div>
                        
                        <div class="input-item">
                            <label for="fg">材料抗拉/压强度设计值 f<sub>g</sub> <span class="unit">(kPa)</span></label>
                            <input type="number" id="fg" value="210000" step="1000">
                        </div>
                        
                        <div class="input-item">
                            <label for="D_anchor2">锚杆外径 D <span class="unit">(m)</span></label>
                            <input type="number" id="D_anchor2" value="0.1" step="0.01">
                        </div>
                        
                        <div class="input-item">
                            <label for="d_anchor2">锚杆内径 d <span class="unit">(m)</span></label>
                            <input type="number" id="d_anchor2" value="0.08" step="0.01">
                        </div>
                    </div>
                </div>
                
                <div class="section">
                    <h2>2. 锚盘强度计算 (规范12.5.5)</h2>
                    
                    <h3>2.1 施工安装受扭矩作用 (公式12.5.5-1)</h3>
                    <div class="formula">τ<sub>max</sub> = 2M<sub>s</sub> / (πD<sub>g</sub>²t) ≤ f<sub>v</sub></div>
                    
                    <div class="input-group">
                        <div class="input-item">
                            <label for="Ms_plate">螺旋锚承受的最大扭矩 M<sub>s</sub> <span class="unit">(kN·m)</span></label>
                            <input type="number" id="Ms_plate" value="45" step="1">
                        </div>
                        
                        <div class="input-item">
                            <label for="fv_plate">锚盘抗剪强度设计值 f<sub>v</sub> <span class="unit">(kPa)</span></label>
                            <input type="number" id="fv_plate" value="120000" step="1000">
                        </div>
                        
                        <div class="input-item">
                            <label for="Dg_plate">锚盘直径 D<sub>g</sub> <span class="unit">(m)</span></label>
                            <input type="number" id="Dg_plate" value="0.3" step="0.01">
                        </div>
                        
                        <div class="input-item">
                            <label for="t_plate">锚盘厚度 t <span class="unit">(m)</span></label>
                            <input type="number" id="t_plate" value="0.02" step="0.001">
                        </div>
                    </div>
                    
                    <h3>2.2 承载受剪力作用 (公式12.5.5-2)</h3>
                    <div class="formula">τ<sub>max</sub> = N / (πD<sub>g</sub>t) ≤ f<sub>v</sub></div>
                    
                    <div class="input-group">
                        <div class="input-item">
                            <label for="N_shear">轴心拉力或压力 N <span class="unit">(kN)</span></label>
                            <input type="number" id="N_shear" value="120" step="10">
                        </div>
                        
                        <div class="input-item">
                            <label for="fv_plate2">锚盘抗剪强度设计值 f<sub>v</sub> <span class="unit">(kPa)</span></label>
                            <input type="number" id="fv_plate2" value="120000" step="1000">
                        </div>
                        
                        <div class="input-item">
                            <label for="Dg_plate2">锚盘直径 D<sub>g</sub> <span class="unit">(m)</span></label>
                            <input type="number" id="Dg_plate2" value="0.3" step="0.01">
                        </div>
                        
                        <div class="input-item">
                            <label for="t_plate2">锚盘厚度 t <span class="unit">(m)</span></label>
                            <input type="number" id="t_plate2" value="0.02" step="0.001">
                        </div>
                    </div>
                </div>
                
                <div class="button-container">
                    <button id="calculateBtn2">开始验算 (规范12.5)</button>
                </div>
                
                <div id="resultsSection2" style="display: none;">
                    <h2>验算结果 (规范12.5)</h2>
                    <p>以下为各项验算是否满足要求的结果：</p>
                    
                    <div class="results-container">
                        <div class="result-card">
                            <div class="result-title">锚杆最大扭矩剪应力</div>
                            <div id="resultAnchorTorsion2" class="result-status">-</div>
                            <div class="norm-reference">验算公式 (12.5.4-1)</div>
                        </div>
                        
                        <div class="result-card">
                            <div class="result-title">锚杆轴心拉/压强度</div>
                            <div id="resultAnchorAxial2" class="result-status">-</div>
                            <div class="norm-reference">验算公式 (12.5.4-2)</div>
                        </div>
                        
                        <div class="result-card">
                            <div class="result-title">锚盘施工扭矩剪应力</div>
                            <div id="resultPlateTorsion2" class="result-status">-</div>
                            <div class="norm-reference">验算公式 (12.5.5-1)</div>
                        </div>
                        
                        <div class="result-card">
                            <div class="result-title">锚盘承载剪力</div>
                            <div id="resultPlateShear2" class="result-status">-</div>
                            <div class="norm-reference">验算公式 (12.5.5-2)</div>
                        </div>
                    </div>
                    
                    <div class="legend">
                        <div class="legend-item">
                            <div class="legend-color status-satisfied"></div>
                            <span>满足要求</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color status-unsatisfied"></div>
                            <span>不满足要求</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 选项卡切换功能
        const tabs = document.querySelectorAll('.tab');
        const methodContents = document.querySelectorAll('.method-content');
        
        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                // 移除所有活动状态
                tabs.forEach(t => t.classList.remove('active'));
                methodContents.forEach(c => c.classList.remove('active'));
                
                // 添加当前活动状态
                tab.classList.add('active');
                const tabId = tab.getAttribute('data-tab');
                document.getElementById(tabId).classList.add('active');
                
                // 隐藏结果区域
                document.getElementById('resultsSection1').style.display = 'none';
                document.getElementById('resultsSection2').style.display = 'none';
            });
        });
        
        // 方法1：螺旋锚结构强度验算（规范7.5节）
        function calculateMethod1() {
            // 获取输入值
            // 锚杆验算参数
            const T_Al_max = parseFloat(document.getElementById('T_Al_max').value);
            const f = parseFloat(document.getElementById('f').value);
            const b_run = parseFloat(document.getElementById('b_run').value);
            const d_run = parseFloat(document.getElementById('d_run').value);
            const T_q_m = parseFloat(document.getElementById('T_q_m').value);
            const f_vk = parseFloat(document.getElementById('f_vk').value);
            const b_install = parseFloat(document.getElementById('b_install').value);
            const d_install = parseFloat(document.getElementById('d_install').value);
            
            // 锚盘验算参数
            const T_Al_max_plate = parseFloat(document.getElementById('T_Al_max_plate').value);
            const b_plate_run = parseFloat(document.getElementById('b_plate_run').value);
            const t_plate_run = parseFloat(document.getElementById('t_plate_run').value);
            const f_v_plate_run = parseFloat(document.getElementById('f_v_plate_run').value);
            const n_run = parseInt(document.getElementById('n_run').value);
            const T_q_m_plate = parseFloat(document.getElementById('T_q_m_plate').value);
            const b_plate_install = parseFloat(document.getElementById('b_plate_install').value);
            const t_plate_install = parseFloat(document.getElementById('t_plate_install').value);
            const f_v_plate_install = parseFloat(document.getElementById('f_v_plate_install').value);
            const n_install = parseInt(document.getElementById('n_install').value);
            
            // 验证输入
            if (isNaN(T_Al_max) || isNaN(f) || isNaN(b_run) || isNaN(d_run) || 
                isNaN(T_q_m) || isNaN(f_vk) || isNaN(b_install) || isNaN(d_install) ||
                isNaN(T_Al_max_plate) || isNaN(b_plate_run) || isNaN(t_plate_run) || isNaN(f_v_plate_run) ||
                isNaN(T_q_m_plate) || isNaN(b_plate_install) || isNaN(t_plate_install) || isNaN(f_v_plate_install)) {
                alert("请输入有效的数值！");
                return;
            }
            
            // 1.1 锚杆运行工作状态验算 (公式14)
            const A_g = Math.PI/4 * (Math.pow(b_run, 2) - Math.pow(d_run, 2));
            const capacity_run = f * A_g; // kN
            const anchorRunSatisfied = T_Al_max <= capacity_run;
            
            // 1.2 锚杆施工旋拧状态验算 (公式15)
            const W_p = 1.15 * Math.PI * (Math.pow(b_install, 4) - Math.pow(d_install, 4)) / (16 * b_install);
            const capacity_torsion = f_vk * W_p; // kN·m
            const anchorInstallSatisfied = T_q_m <= capacity_torsion;
            
            // 2.1 锚盘运行工作状态验算 (公式16)
            let capacity_plate_run;
            if (n_run === 1) {
                // 单个锚盘
                capacity_plate_run = Math.PI * b_plate_run * t_plate_run * f_v_plate_run;
            } else {
                // 多个锚盘
                capacity_plate_run = n_run * (Math.PI * b_plate_run * t_plate_run) * f_v_plate_run / 1.2;
            }
            const plateRunSatisfied = T_Al_max_plate <= capacity_plate_run;
            
            // 2.2 锚盘施工旋拧状态验算 (公式17)
            let capacity_plate_install;
            if (n_install === 1) {
                // 单个锚盘
                capacity_plate_install = Math.PI * Math.pow(b_plate_install, 2) * t_plate_install * f_v_plate_install / 2;
            } else {
                // 多个锚盘
                capacity_plate_install = n_install * (Math.PI * Math.pow(b_plate_install, 2) * t_plate_install) * f_v_plate_install / 2.4;
            }
            const plateInstallSatisfied = T_q_m_plate <= capacity_plate_install;
            
            // 显示结果
            displayResult(document.getElementById('resultAnchorRun1'), anchorRunSatisfied);
            displayResult(document.getElementById('resultAnchorInstall1'), anchorInstallSatisfied);
            displayResult(document.getElementById('resultPlateRun1'), plateRunSatisfied);
            displayResult(document.getElementById('resultPlateInstall1'), plateInstallSatisfied);
            
            // 显示结果区域
            document.getElementById('resultsSection1').style.display = 'block';
        }
        
        // 方法2：架空输电线路螺旋桩验算（规范12.5节） - 更新单位后的版本
        function calculateMethod2() {
            // 获取输入值 - 注意单位已统一为m、kN、kPa、kN·m
            // 锚杆验算参数
            const Ms = parseFloat(document.getElementById('Ms').value); // kN·m
            const fv_anchor = parseFloat(document.getElementById('fv_anchor').value); // kPa
            const D_anchor = parseFloat(document.getElementById('D_anchor').value); // m
            const d_anchor = parseFloat(document.getElementById('d_anchor').value); // m
            
            const N_axial = parseFloat(document.getElementById('N_axial').value); // kN
            const fg = parseFloat(document.getElementById('fg').value); // kPa
            const D_anchor2 = parseFloat(document.getElementById('D_anchor2').value); // m
            const d_anchor2 = parseFloat(document.getElementById('d_anchor2').value); // m
            
            // 锚盘验算参数
            const Ms_plate = parseFloat(document.getElementById('Ms_plate').value); // kN·m
            const fv_plate = parseFloat(document.getElementById('fv_plate').value); // kPa
            const Dg_plate = parseFloat(document.getElementById('Dg_plate').value); // m
            const t_plate = parseFloat(document.getElementById('t_plate').value); // m
            
            const N_shear = parseFloat(document.getElementById('N_shear').value); // kN
            const fv_plate2 = parseFloat(document.getElementById('fv_plate2').value); // kPa
            const Dg_plate2 = parseFloat(document.getElementById('Dg_plate2').value); // m
            const t_plate2 = parseFloat(document.getElementById('t_plate2').value); // m
            
            // 验证输入
            if (isNaN(Ms) || isNaN(fv_anchor) || isNaN(D_anchor) || isNaN(d_anchor) || 
                isNaN(N_axial) || isNaN(fg) || isNaN(D_anchor2) || isNaN(d_anchor2) ||
                isNaN(Ms_plate) || isNaN(fv_plate) || isNaN(Dg_plate) || isNaN(t_plate) ||
                isNaN(N_shear) || isNaN(fv_plate2) || isNaN(Dg_plate2) || isNaN(t_plate2)) {
                alert("请输入有效的数值！");
                return;
            }
            
            // 1.1 锚杆最大扭矩下剪应力验算 (公式12.5.4-1)
            // 计算抗扭截面模量 Wp = π*(D^4 - d^4)/(16*D) [单位：m³]
            const Wp = Math.PI * (Math.pow(D_anchor, 4) - Math.pow(d_anchor, 4)) / (16 * D_anchor);
            // 计算剪应力 τ_max = Ms / Wp [单位：kN/m² = kPa]
            const tau_max_torsion = Ms / Wp; // kPa
            const anchorTorsionSatisfied = tau_max_torsion <= fv_anchor;
            
            // 1.2 锚杆轴心受拉/受压强度验算 (公式12.5.4-2)
            // 计算净面积 An = 0.95π(D² - d²)/4 [单位：m²]
            const An = 0.95 * Math.PI * (Math.pow(D_anchor2, 2) - Math.pow(d_anchor2, 2)) / 4;
            // 计算应力 σ = N / An [单位：kN/m² = kPa]
            const sigma_axial = N_axial / An; // kPa
            const anchorAxialSatisfied = sigma_axial <= fg;
            
            // 2.1 锚盘施工扭矩剪应力验算 (公式12.5.5-1)
            // 计算剪应力 τ_max = 2Ms / (πDg²t) [单位：kN/m² = kPa]
            const tau_max_plate_torsion = 2 * Ms_plate / (Math.PI * Math.pow(Dg_plate, 2) * t_plate); // kPa
            const plateTorsionSatisfied = tau_max_plate_torsion <= fv_plate;
            
            // 2.2 锚盘承载剪力验算 (公式12.5.5-2)
            // 计算剪应力 τ_max = N / (πDg*t) [单位：kN/m² = kPa]
            const tau_max_plate_shear = N_shear / (Math.PI * Dg_plate2 * t_plate2); // kPa
            const plateShearSatisfied = tau_max_plate_shear <= fv_plate2;
            
            // 显示结果
            displayResult(document.getElementById('resultAnchorTorsion2'), anchorTorsionSatisfied);
            displayResult(document.getElementById('resultAnchorAxial2'), anchorAxialSatisfied);
            displayResult(document.getElementById('resultPlateTorsion2'), plateTorsionSatisfied);
            displayResult(document.getElementById('resultPlateShear2'), plateShearSatisfied);
            
            // 显示结果区域
            document.getElementById('resultsSection2').style.display = 'block';
        }
        
        // 显示结果函数
        function displayResult(element, satisfied) {
            if (satisfied) {
                element.textContent = "满足要求";
                element.className = "result-status status-satisfied";
            } else {
                element.textContent = "不满足要求";
                element.className = "result-status status-unsatisfied";
            }
        }
        
        // 绑定计算按钮点击事件
        document.getElementById('calculateBtn1').addEventListener('click', calculateMethod1);
        document.getElementById('calculateBtn2').addEventListener('click', calculateMethod2);
        
        // 页面加载后立即计算一次默认参数
        window.addEventListener('DOMContentLoaded', calculateMethod1);
    </script>
</body>
</html>